(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"/no6":function(t,e,c){"use strict";c.r(e),c.d(e,"MarketAreaModule",function(){return V});var n=c("ofXK"),i=c("STbY"),r=c("0IaG"),a=c("/t3+"),o=c("3Pt+"),s=c("xHqg"),u=c("d3UM"),d=c("f0Cb"),b=c("XhcP"),p=c("wZkO"),h=c("v2Hk"),l=c("mrSG"),g=c("V9dn"),m=c("TLMc"),f=c("vBqF"),v=c("fXoL"),S=c("Vmn7"),C=c("RYsQ"),y=c("yCR3"),w=c("tyNb"),M=c("NFeN"),I=c("vSYu"),O=c("Nqw5"),R=c("6M75");class k{constructor(){this.quantity=1}}var P=c("AytR"),_=c("cOBF"),q=c("Wp6s"),B=c("bTqV"),x=c("kmnG"),N=c("qFsG");let A=(()=>{class t{constructor(t,e,c,n){this.cartItemsService=t,this.notificationService=e,this.authService=c,this.router=n,this.quantity=1,this.cartItem=new k}ngOnInit(){return Object(l.a)(this,void 0,void 0,function*(){this.imageUrl=P.a.productsUrl+"productImages/"+this.product.imageName})}plus(){this.quantity++}minus(){this.quantity--}addToCart(){return Object(l.a)(this,void 0,void 0,function*(){try{const t=f.a.getState().cartItemState.cartItems.find(t=>t.productId===this.product._id);if(t){const e=this.updateOldCartItem(t);this.cartItem=yield this.cartItemsService.updateCartItemAsync(e),this.notificationService.success(this.cartItem.product.name+" has been updated")}else{const t=this.createCartItem();this.cartItem=yield this.cartItemsService.addCartItemAsync(t),this.notificationService.success(this.cartItem.product.name+" has been added")}}catch(t){this.notificationService.error(t),403===t.status&&(this.authService.logout(),this.router.navigateByUrl(g.a.homeUrl))}})}updateOldCartItem(t){return t.quantity+=this.quantity,t.totalPrice=this.product.price*t.quantity,t}createCartItem(){let t=new k;return t.productId=this.product._id,t.quantity=this.quantity,t.totalPrice=this.product.price*this.quantity,t.shoppingCartId=f.a.getState().shoppingCartState.shoppingCart._id,t.product=this.product,t}}return t.\u0275fac=function(e){return new(e||t)(v.Mb(_.a),v.Mb(C.a),v.Mb(y.a),v.Mb(w.a))},t.\u0275cmp=v.Gb({type:t,selectors:[["app-product-card"]],inputs:{product:"product"},decls:22,vars:8,consts:[["mat-card-image","",3,"src","alt"],["mat-mini-fab","","color","warn",3,"disabled","click"],["matInput","","disabled","","type","number","min","1",3,"ngModel","ngModelChange"],["mat-mini-fab","","color","accent",3,"click"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(v.Sb(0,"mat-card"),v.Nb(1,"img",0),v.Sb(2,"mat-card-content"),v.Sb(3,"mat-card-title"),v.vc(4),v.Rb(),v.Sb(5,"mat-card-subtitle"),v.vc(6),v.dc(7,"currency"),v.Rb(),v.Rb(),v.Sb(8,"mat-card-actions"),v.Sb(9,"button",1),v.Zb("click",function(){return e.minus()}),v.Sb(10,"mat-icon"),v.vc(11,"remove"),v.Rb(),v.Rb(),v.Sb(12,"mat-form-field"),v.Sb(13,"mat-label"),v.vc(14,"Quantity"),v.Rb(),v.Sb(15,"input",2),v.Zb("ngModelChange",function(t){return e.quantity=t}),v.Rb(),v.Rb(),v.Sb(16,"button",3),v.Zb("click",function(){return e.plus()}),v.Sb(17,"mat-icon"),v.vc(18,"add"),v.Rb(),v.Rb(),v.Nb(19,"br"),v.Sb(20,"button",4),v.Zb("click",function(){return e.addToCart()}),v.vc(21,"Add To Cart"),v.Rb(),v.Rb(),v.Rb()),2&t&&(v.Bb(1),v.ic("src",e.imageUrl,v.pc),v.ic("alt",e.product.name),v.Bb(3),v.wc(e.product.name),v.Bb(2),v.wc(v.ec(7,6,e.product.price)),v.Bb(3),v.hc("disabled",e.quantity<=1),v.Bb(6),v.hc("ngModel",e.quantity))},directives:[q.a,q.e,q.c,q.h,q.g,q.b,B.b,M.a,x.c,x.f,N.b,o.p,o.b,o.l,o.o],pipes:[n.c],styles:["mat-card[_ngcontent-%COMP%]{width:300px;display:inline-block;margin:5px}img[_ngcontent-%COMP%]{height:200px}mat-form-field[_ngcontent-%COMP%]{width:100px;margin-left:5px}"]}),t})();var F=c("Xa2L");function T(t,e){if(1&t){const t=v.Tb();v.Sb(0,"a",3),v.Zb("click",function(){v.oc(t);const c=e.$implicit;return v.cc().changeCategory(c._id)}),v.vc(1),v.Rb()}if(2&t){const t=e.$implicit;v.Bb(1),v.xc(" ",t.categoryName," ")}}function Z(t,e){1&t&&v.Nb(0,"app-product-card",7),2&t&&v.hc("product",e.$implicit)}function j(t,e){if(1&t&&(v.Qb(0),v.uc(1,Z,1,1,"app-product-card",6),v.Pb()),2&t){const t=v.cc();v.Bb(1),v.hc("ngForOf",t.productsSwitched)}}function U(t,e){1&t&&(v.Qb(0),v.Sb(1,"div",8),v.Sb(2,"p"),v.Nb(3,"mat-spinner"),v.Rb(),v.Rb(),v.Pb())}function G(t,e){1&t&&(v.Qb(0),v.Sb(1,"div",8),v.Sb(2,"p"),v.Sb(3,"span"),v.vc(4,"Nothing with that name in store"),v.Rb(),v.Rb(),v.Rb(),v.Pb())}let L=(()=>{class t{constructor(t,e,c){this.categoriesService=t,this.productsService=e,this.authService=c}ngOnInit(){return Object(l.a)(this,void 0,void 0,function*(){try{this.categories=yield this.categoriesService.getAllCategoriesAsync(),this.products=yield this.productsService.getAllProducts(),this.productsSwitched=[...this.products],this.unSubscribeFromStore=f.a.subscribe(()=>Object(l.a)(this,void 0,void 0,function*(){this.products=yield this.productsService.getAllProducts(),this.productsSwitched=[...this.products]}))}catch(t){403===t.status&&this.authService.logout()}})}changeCategory(t){this.productsSwitched=[...this.products.filter(e=>e.categoryId===t)]}allCategory(){this.productsSwitched=[...this.products]}searchProduct(t){this.productsSwitched=[...this.products.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()))]}}return t.\u0275fac=function(e){return new(e||t)(v.Mb(I.a),v.Mb(O.a),v.Mb(y.a))},t.\u0275cmp=v.Gb({type:t,selectors:[["app-products-list"]],decls:10,vars:4,consts:[["mat-tab-nav-bar",""],[3,"productToSearch"],[1,"toolbar-flex"],["mat-tab-link","","active","",3,"click"],["mat-tab-link","","active","",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"product",4,"ngFor","ngForOf"],[3,"product"],[1,"nothing-in-store"]],template:function(t,e){1&t&&(v.Sb(0,"nav",0),v.Sb(1,"app-search-bar",1),v.Zb("productToSearch",function(t){return e.searchProduct(t)}),v.Rb(),v.Nb(2,"span",2),v.Sb(3,"a",3),v.Zb("click",function(){return e.allCategory()}),v.vc(4," All "),v.Rb(),v.uc(5,T,2,1,"a",4),v.Rb(),v.Sb(6,"div"),v.uc(7,j,2,1,"ng-container",5),v.uc(8,U,4,0,"ng-container",5),v.uc(9,G,5,0,"ng-container",5),v.Rb()),2&t&&(v.Bb(5),v.hc("ngForOf",e.categories),v.Bb(2),v.hc("ngIf",null==e.productsSwitched?null:e.productsSwitched.length),v.Bb(1),v.hc("ngIf",!(null!=e.products&&e.products.length)),v.Bb(1),v.hc("ngIf",!(null!=e.productsSwitched&&e.productsSwitched.length)))},directives:[p.b,R.a,p.a,n.l,n.m,A,F.b],styles:['nav[_ngcontent-%COMP%]{background:#fff}div[_ngcontent-%COMP%]{overflow:auto;height:85%}.toolbar-flex[_ngcontent-%COMP%]{flex:0.5}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{height:auto}.nothing-in-store[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}p[_ngcontent-%COMP%]{position:relative;height:60%;width:450px}p[_ngcontent-%COMP%], p[_ngcontent-%COMP%]:before{border-radius:20px}p[_ngcontent-%COMP%]:before{content:"";background-image:url(empty-store.7c43028843487e0a3f47.jfif);background-position:50%;background-repeat:no-repeat;background-size:cover;position:absolute;top:0;right:0;bottom:0;left:0;opacity:.65}p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:relative;font-size:xx-large;color:#fff}']}),t})();var Q=c("laEZ");function X(t,e){if(1&t&&v.Nb(0,"app-cart-list",5),2&t){const t=v.cc();v.hc("shoppingCartId",t.shoppingCart._id)("enableChanges",!0)}}const J=[{path:"",component:(()=>{class t{constructor(t,e,c,n){this.shoppingCartService=t,this.notificationService=e,this.authService=c,this.router=n}ngOnInit(){return Object(l.a)(this,void 0,void 0,function*(){try{if(this.shoppingCart=yield this.shoppingCartService.getShoppingCartAsync(),!this.shoppingCart||!this.shoppingCart.open){const t=new m.a;t.userId=f.a.getState().authState.user._id,this.shoppingCart=yield this.shoppingCartService.createShoppingCart(t)}}catch(t){this.notificationService.error(t),403===t.status&&(this.authService.logout(),this.router.navigateByUrl(g.a.homeUrl))}})}}return t.\u0275fac=function(e){return new(e||t)(v.Mb(S.a),v.Mb(C.a),v.Mb(y.a),v.Mb(w.a))},t.\u0275cmp=v.Gb({type:t,selectors:[["app-market"]],decls:15,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"click"],["opened","","mode","side"],["drawer",""],[3,"shoppingCartId","enableChanges",4,"ngIf"],[3,"shoppingCartId","enableChanges"]],template:function(t,e){if(1&t){const t=v.Tb();v.Sb(0,"mat-drawer-container"),v.Sb(1,"nav",0),v.Sb(2,"a",1),v.Zb("click",function(){return v.oc(t),v.nc(12).toggle()}),v.Sb(3,"mat-icon"),v.vc(4,"keyboard_arrow_left"),v.Rb(),v.vc(5," \xa0 Cart \xa0 "),v.Sb(6,"mat-icon"),v.vc(7,"shopping_cart"),v.Rb(),v.vc(8," \xa0 "),v.Sb(9,"mat-icon"),v.vc(10,"keyboard_arrow_right"),v.Rb(),v.Rb(),v.Rb(),v.Sb(11,"mat-drawer",2,3),v.uc(13,X,1,2,"app-cart-list",4),v.Rb(),v.Nb(14,"app-products-list"),v.Rb()}2&t&&(v.Bb(13),v.hc("ngIf",null==e.shoppingCart?null:e.shoppingCart.open))},directives:[b.b,p.b,p.a,M.a,b.a,n.m,L,Q.a],styles:["mat-drawer-container[_ngcontent-%COMP%]{height:100%;background:inherit}mat-drawer[_ngcontent-%COMP%]{width:25%}nav[_ngcontent-%COMP%]{background:#fff}"]}),t})()}];let V=(()=>{class t{}return t.\u0275mod=v.Kb({type:t}),t.\u0275inj=v.Jb({factory:function(e){return new(e||t)},imports:[[n.b,h.a,u.b,o.r,a.a,i.c,r.f,s.d,d.a,b.c,p.c,w.d.forChild(J)]]}),t})()}}]);